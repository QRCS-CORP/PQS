<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PQS: Post Quantum Shell: C:/Users/stepp/Documents/Visual Studio 2022/Projects/C/PQS/PQS/server.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pqs_extra_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PQS: Post Quantum Shell<span id="projectnumber">&#160;1.0.0.0a (A1)</span>
   </div>
   <div id="projectbrief">A quantum safe shell application</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('server_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">server.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>PQS Server functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="pqs_8h_source.html">pqs.h</a>&quot;</code><br />
<code>#include &quot;../../QSC/QSC/rcs.h&quot;</code><br />
<code>#include &quot;../../QSC/QSC/socketserver.h&quot;</code><br />
</div>
<p><a href="server_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4b3434bd162765ecc049a007fa583cb8" id="r_a4b3434bd162765ecc049a007fa583cb8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b3434bd162765ecc049a007fa583cb8">PQS_SERVER_PAUSE_INTERVAL</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:a4b3434bd162765ecc049a007fa583cb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The pause interval used by the server pause function.  <br /></td></tr>
<tr class="separator:a4b3434bd162765ecc049a007fa583cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a464f77940b0c4be43e1f747627c4433f" id="r_a464f77940b0c4be43e1f747627c4433f"><td class="memItemLeft" align="right" valign="top">PQS_EXPORT_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a464f77940b0c4be43e1f747627c4433f">pqs_server_pause</a> (void)</td></tr>
<tr class="memdesc:a464f77940b0c4be43e1f747627c4433f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause the server, suspending new joins.  <br /></td></tr>
<tr class="separator:a464f77940b0c4be43e1f747627c4433f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77be24f2908514353a01634eb3942e48" id="r_a77be24f2908514353a01634eb3942e48"><td class="memItemLeft" align="right" valign="top">PQS_EXPORT_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77be24f2908514353a01634eb3942e48">pqs_server_quit</a> (qsc_socket *source)</td></tr>
<tr class="memdesc:a77be24f2908514353a01634eb3942e48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quit the server, closing all connections.  <br /></td></tr>
<tr class="separator:a77be24f2908514353a01634eb3942e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21ed8451507f44e962e1a24b7d25e5a2" id="r_a21ed8451507f44e962e1a24b7d25e5a2"><td class="memItemLeft" align="right" valign="top">PQS_EXPORT_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21ed8451507f44e962e1a24b7d25e5a2">pqs_server_resume</a> (void)</td></tr>
<tr class="memdesc:a21ed8451507f44e962e1a24b7d25e5a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume the server listener function from a paused state.  <br /></td></tr>
<tr class="separator:a21ed8451507f44e962e1a24b7d25e5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08491dc116cdd550407bc040d555cc26" id="r_a08491dc116cdd550407bc040d555cc26"><td class="memItemLeft" align="right" valign="top">PQS_EXPORT_API <a class="el" href="pqs_8h.html#a2c9a6e74f4ff60d25602074a1d70a4e2">pqs_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08491dc116cdd550407bc040d555cc26">pqs_server_start_ipv4</a> (qsc_socket *source, const <a class="el" href="structpqs__server__signature__key.html">pqs_server_signature_key</a> *kset, void(*receive_callback)(<a class="el" href="structpqs__connection__state.html">pqs_connection_state</a> *, const uint8_t *, size_t), void(*disconnect_callback)(<a class="el" href="structpqs__connection__state.html">pqs_connection_state</a> *))</td></tr>
<tr class="memdesc:a08491dc116cdd550407bc040d555cc26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the IPv4 multi-threaded server.  <br /></td></tr>
<tr class="separator:a08491dc116cdd550407bc040d555cc26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ea87dcbc4b998bb1fab22730713822" id="r_a40ea87dcbc4b998bb1fab22730713822"><td class="memItemLeft" align="right" valign="top">PQS_EXPORT_API <a class="el" href="pqs_8h.html#a2c9a6e74f4ff60d25602074a1d70a4e2">pqs_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40ea87dcbc4b998bb1fab22730713822">pqs_server_start_ipv6</a> (qsc_socket *source, const <a class="el" href="structpqs__server__signature__key.html">pqs_server_signature_key</a> *kset, void(*receive_callback)(<a class="el" href="structpqs__connection__state.html">pqs_connection_state</a> *, const uint8_t *, size_t), void(*disconnect_callback)(<a class="el" href="structpqs__connection__state.html">pqs_connection_state</a> *))</td></tr>
<tr class="memdesc:a40ea87dcbc4b998bb1fab22730713822"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the IPv6 multi-threaded server.  <br /></td></tr>
<tr class="separator:a40ea87dcbc4b998bb1fab22730713822"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PQS Server functions. </p>
<p>This header defines the functions used to implement the Post Quantum Shell (PQS) server. These functions enable the server to pause accepting new connections, resume listening, shut down (quitting) by closing all active connections, and to start the multi-threaded server on both IPv4 and IPv6 networks.</p>
<p>The multi-threaded server functions require a pointer to the listener socket as well as a pointer to the server's private key (QSMP private key) used for secure communications. Callback functions are provided to process incoming client data streams and to handle client disconnections. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4b3434bd162765ecc049a007fa583cb8" name="a4b3434bd162765ecc049a007fa583cb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3434bd162765ecc049a007fa583cb8">&#9670;&#160;</a></span>PQS_SERVER_PAUSE_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PQS_SERVER_PAUSE_INTERVAL&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The pause interval used by the server pause function. </p>
<p>This macro defines the time interval (in milliseconds) during which the server will pause accepting new connection requests. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a464f77940b0c4be43e1f747627c4433f" name="a464f77940b0c4be43e1f747627c4433f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a464f77940b0c4be43e1f747627c4433f">&#9670;&#160;</a></span>pqs_server_pause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PQS_EXPORT_API void pqs_server_pause </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pause the server, suspending new joins. </p>
<p>This function temporarily suspends the server listener so that no new client connections will be accepted. This is useful during maintenance or when shutting down the server.</p>
<p>DOXYGEN_IGNORE </p>

</div>
</div>
<a id="a77be24f2908514353a01634eb3942e48" name="a77be24f2908514353a01634eb3942e48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77be24f2908514353a01634eb3942e48">&#9670;&#160;</a></span>pqs_server_quit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PQS_EXPORT_API void pqs_server_quit </td>
          <td>(</td>
          <td class="paramtype">qsc_socket *</td>          <td class="paramname"><span class="paramname"><em>source</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quit the server, closing all connections. </p>
<p>This function terminates the server by closing all active client connections. The provided socket (source) is used as the listener or reference socket which is closed as part of the shutdown process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>A pointer to the server listener socket. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21ed8451507f44e962e1a24b7d25e5a2" name="a21ed8451507f44e962e1a24b7d25e5a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21ed8451507f44e962e1a24b7d25e5a2">&#9670;&#160;</a></span>pqs_server_resume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PQS_EXPORT_API void pqs_server_resume </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resume the server listener function from a paused state. </p>
<p>This function resumes the server's listening operations if it was previously paused. New client connections will again be accepted after this function is called. </p>

</div>
</div>
<a id="a08491dc116cdd550407bc040d555cc26" name="a08491dc116cdd550407bc040d555cc26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08491dc116cdd550407bc040d555cc26">&#9670;&#160;</a></span>pqs_server_start_ipv4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PQS_EXPORT_API <a class="el" href="pqs_8h.html#a2c9a6e74f4ff60d25602074a1d70a4e2">pqs_errors</a> pqs_server_start_ipv4 </td>
          <td>(</td>
          <td class="paramtype">qsc_socket *</td>          <td class="paramname"><span class="paramname"><em>source</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpqs__server__signature__key.html">pqs_server_signature_key</a> *</td>          <td class="paramname"><span class="paramname"><em>kset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structpqs__connection__state.html">pqs_connection_state</a> *, const uint8_t *, size_t), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>disconnect_callback&#160;</em></span>)(<a class="el" href="structpqs__connection__state.html">pqs_connection_state</a> *)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the IPv4 multi-threaded server. </p>
<p>This function starts the PQS server in a multi-threaded mode for IPv4. It initializes the listener socket, performs necessary key exchange operations using the provided server private key, and then spawns threads to handle incoming client data streams and disconnections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>A pointer to the listener server socket. </td></tr>
    <tr><td class="paramname">kset</td><td>[const] A pointer to the QSMP private key (server signature key) used for the key exchange. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the callback function that processes client data streams. </td></tr>
    <tr><td class="paramname">disconnect_callback</td><td>A pointer to the callback function invoked upon client disconnection.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a <a class="el" href="pqs_8h.html#a2c9a6e74f4ff60d25602074a1d70a4e2" title="Enumeration of error codes returned by PQS functions.">pqs_errors</a> value indicating the success or failure of the server startup and key exchange process. </dd></dl>

</div>
</div>
<a id="a40ea87dcbc4b998bb1fab22730713822" name="a40ea87dcbc4b998bb1fab22730713822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40ea87dcbc4b998bb1fab22730713822">&#9670;&#160;</a></span>pqs_server_start_ipv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PQS_EXPORT_API <a class="el" href="pqs_8h.html#a2c9a6e74f4ff60d25602074a1d70a4e2">pqs_errors</a> pqs_server_start_ipv6 </td>
          <td>(</td>
          <td class="paramtype">qsc_socket *</td>          <td class="paramname"><span class="paramname"><em>source</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpqs__server__signature__key.html">pqs_server_signature_key</a> *</td>          <td class="paramname"><span class="paramname"><em>kset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structpqs__connection__state.html">pqs_connection_state</a> *, const uint8_t *, size_t), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>disconnect_callback&#160;</em></span>)(<a class="el" href="structpqs__connection__state.html">pqs_connection_state</a> *)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the IPv6 multi-threaded server. </p>
<p>This function starts the PQS server in a multi-threaded mode for IPv6. It initializes the listener socket, performs the key exchange using the provided server private key, and spawns threads to handle incoming client data streams.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>A pointer to the listener server socket. </td></tr>
    <tr><td class="paramname">kset</td><td>[const] A pointer to the QSMP private key (server signature key) used for the key exchange. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the callback function that processes client data streams. </td></tr>
    <tr><td class="paramname">disconnect_callback</td><td>A pointer to the callback function invoked upon client disconnection.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a <a class="el" href="pqs_8h.html#a2c9a6e74f4ff60d25602074a1d70a4e2" title="Enumeration of error codes returned by PQS functions.">pqs_errors</a> value indicating the success or failure of the server startup and key exchange process. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1e9536c9e8b0410029ffc8ee300da5ee.html">PQS</a></li><li class="navelem"><a class="el" href="server_8h.html">server.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
